<!-- This is for the actual single article -->


<!DOCTYPE html>
<html lang="en">
<head>
  <title>Servo Control | Planet Express</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<meta name="description" content="How to control a rc servo"><meta name="author" content="walchko">  <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
  <meta http-equiv="Cache-Control" content="max-age=604800, must-revalidate" />
  <link href="../../../../theme/css/screen.css" rel="stylesheet" type="text/css" />
  <link href="../../../../theme/css/pygments.css" rel="stylesheet" type="text/css" />
  <link rel="icon" href="../../../../favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="../../../../favicon.ico" type="image/x-icon">
</head>
<body>
<div id="outer-wrapper">
<div id="header-wrapper">
  <div class="logo"><a href="../../../..">Planet Express</a></div>
  <div class="small">Our crew is replaceable. Your package isn't.</div>
  <div class="nav">
  <li><a href="../../../../about.html">About Me</a></li>
  <li><a href="../../../../colophon.html">Colophon</a></li>
  <li><a href="../../../../categories.html">Topics</a></li>
  <li><a href="../../../../archives.html">Blog</a></li>
  </div>
  <div class="nav social">
<ul>
    <li><a href="http://github.com/walchko"><i class="fa fa-github-alt fa-2x"></i></a></li>
    <li><a href="http://stackoverflow.com/users/5374768/kevin"><i class="fa fa-stack-overflow fa-2x"></i></a></li>
    <li><a href="http://raspberrypi.stackexchange.com/users/1677/kevin"><i class="fa fa-stack-exchange fa-2x"></i></a></li>
</ul>  </div>
</div>    <div id="main">

<!--  -->

<h2><a href="../../../../posts/2017/01/servo-control">Servo Control</a></h2>
<h5><i class="icon-feather"></i> Mon 02 January 2017
<i class="icon-bookmarks"></i>
</h5>

<div class="section" id="rc-servo">
<h2>RC Servo</h2>
<div class="figure align-center">
<img alt="" src="../../../../blog/robots/pics/rc_servo.jpg" style="width: 300px;" />
</div>
</div>
<div class="section" id="control">
<h2>Control</h2>
<p>There are many ways to control an RC servo and both the Arduino and the RPi have
software libraries to do that. However, that consumes a small amount of overhead (processor
power) and you may not want that.</p>
<div class="figure align-center">
<img alt="" src="../../../../blog/robots/pics/servo_controller_9685.jpg" style="width: 300px;" />
</div>
<p>Adafruit 16-Channel 12-bit PWM/Servo Driver - I2C interface <a class="reference external" href="https://www.adafruit.com/products/815">PCA9685</a>
is a good hardware solution that is controlled via i2c. This is nice, because you can
hook up a bunch of these and control more servos than you could ever want! The Adafruit
<a class="reference external" href="https://learn.adafruit.com/adafruit-16-channel-servo-driver-with-raspberry-pi">tutorial</a>
does a great job of showing how to hook this up and the python library is
<a class="reference external" href="https://github.com/adafruit/Adafruit_Python_PCA9685">here</a> in their github account.</p>
<p>I used it to make a simple 4 legged (quadruped) robot.</p>
<div class="figure align-center">
<img alt="" src="../../../../blog/robots/pics/rc-spider-1.jpg" style="width: 400px;" />
</div>
</div>
<div class="section" id="python">
<h2>Python</h2>
<p>You can also control servos from python via a variety of methods, one is:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">import</span> <span class="nn">RPi.GPIO</span> <span class="kn">as</span> <span class="nn">GPIO</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">angle</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">dc</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
  <span class="n">DutyCycle</span> <span class="o">=</span> <span class="mi">7</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">a</span><span class="o">+</span><span class="mi">5</span>
  <span class="k">return</span> <span class="n">DutyCycle</span>

<span class="n">GPIO</span><span class="o">.</span><span class="n">setmode</span><span class="p">(</span><span class="n">GPIO</span><span class="o">.</span><span class="n">BCM</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span><span class="n">GPIO</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="n">pwm</span><span class="o">=</span><span class="n">GPIO</span><span class="o">.</span><span class="n">PWM</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span>
<span class="n">pwm</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">a</span><span class="o">=</span><span class="n">dc</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
<span class="n">pwm</span><span class="o">.</span><span class="n">ChangeDutyCycle</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">pwm</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></div>
<p>This will turn an RC servo. Since the timing varies between servos, you will have to
adjust the duty cycle timing for your exact servo.</p>
</div>


<p align="center"><a href="#">on the top</a></p>
    </div>
</div>
<div id="footer-wrapper">
<ul class="footer">
</ul><ul class="footer">
    <li class="footer">&copy;&nbsp;2016&nbsp;Kevin J. Walchko&nbsp;::</li>
    <li class="footer"><a href="../../../..">Planet Express </a>&nbsp;::</li>
    <li class="footer"><a href="https://github.com/getpelican">pelican</a></li>
    <!-- <li class="footer"><a href="http://creativecommons.org/licenses/by-nc/3.0/deed">Content CC BY-NC</a>&nbsp;::</li> -->
    <!-- <li class="footer"><a href="http://fontawesome.io">Font Awesome <i class="fa fa-flag"></i></a></li> -->
    <!-- <li class="footer"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></li> -->
</ul>
<span><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></span>
</div></body>
</html>