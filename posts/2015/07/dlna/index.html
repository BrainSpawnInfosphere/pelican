<!-- This is for the actual single article -->


<!DOCTYPE html>
<html lang="en">
<head>
  <title>DLNA | Planet Express</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<meta name="description" content="Using linux to serve up videos using DLNA"><meta name="author" content="walchko">  <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
  <meta http-equiv="Cache-Control" content="max-age=604800, must-revalidate" />
  <link href="../../../../theme/css/screen.css" rel="stylesheet" type="text/css" />
  <link href="../../../../theme/css/pygments.css" rel="stylesheet" type="text/css" />
  <link rel="icon" href="../../../../favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="../../../../favicon.ico" type="image/x-icon">
</head>
<body>
<div id="outer-wrapper">
<div id="header-wrapper">
  <div class="logo"><a href="../../../..">Planet Express</a></div>
  <div class="small">Our crew is replaceable. Your package isn't.</div>
  <div class="nav">
  <li><a href="../../../../about.html">About Me</a></li>
  <li><a href="../../../../colophon.html">Colophon</a></li>
  <li><a href="../../../../categories.html">Topics</a></li>
  <li><a href="../../../../archives.html">Blog</a></li>
  </div>
  <div class="nav social">
<ul>
    <li><a href="http://github.com/walchko"><i class="fa fa-github-alt fa-2x"></i></a></li>
    <li><a href="http://stackoverflow.com/users/5374768/kevin"><i class="fa fa-stack-overflow fa-2x"></i></a></li>
    <li><a href="http://raspberrypi.stackexchange.com/users/1677/kevin"><i class="fa fa-stack-exchange fa-2x"></i></a></li>
</ul>  </div>
</div>    <div id="main">

<!--  -->

<h2><a href="../../../../posts/2015/07/dlna">DLNA</a></h2>
<h5><i class="icon-feather"></i> Thu 23 July 2015
<i class="icon-bookmarks"></i>
</h5>

<img alt="" class="align-center" src="../../../../blog/raspbian/pics/dlna.jpg" style="width: 200px;" />
<p><a class="reference external" href="http://www.htpcguides.com/install-readymedia-minidlna-1-1-4-raspberry-pi/">source</a></p>
<p>Digital Living Network Alliance (<a class="reference external" href="http://www.dlna.org/">DLNA</a> ) servers allow you to
stream your media library on your HTPC server to any DLNA
enabled client. DLNA enabled clients include Bluray players, XBOX 360, PS3,
and some TVs. There are other DLNA servers out there for the Raspberry Pi. I was
looking at MediaTomb but it consumes several hundred megabytes of RAM when it is in use.
This it not ideal on the low spec Pi running Raspbian. I had trouble with miniDLNA 1.0.24
not displaying avi (Divx, XviD) files in its folder database, this bug has been patched
and fixed so that avi files – at least the ones I tested – were accessible by my DLNA
clients. I will assume you have already mounted a USB hard drive for this guide –
here is my Properly Mount USB Storage on Raspberry Guide in case you do need to mount.
You will be compiling miniDLNA for Raspbian from source, it only takes a few minutes.</p>
<div class="section" id="install-readymedia-minidlna">
<h2>Install ReadyMedia (miniDLNA)</h2>
<p>The latest version of ReadyMedia miniDLNA in the Raspbian repos is ancient so we are
going to compile miniDLNA (now ReadyMedia) from source on Raspbian. This should fix avi
problems you may have had in the past like them not showing up in the library.</p>
<p>Remove your old miniDLNA 1.0.24:</p>
<pre class="literal-block">
sudo apt-get purge minidlna -y
sudo apt-get remove minidlna
sudo apt-get autoremove -y
</pre>
<p>Make sure you have a source repository, default Raspbian does not include this</p>
<pre class="literal-block">
echo &quot;deb-src http://archive.raspbian.org/raspbian wheezy main contrib non-free&quot; | sudo tee -a /etc/apt/sources.list
</pre>
<p>Update repositories so it will detect your new source repo</p>
<pre class="literal-block">
sudo apt-get update
</pre>
<p>Grab dependencies for building it from source:</p>
<pre class="literal-block">
sudo apt-get build-dep minidlna -y
</pre>
<p>If you get any errors you can install the dependencies manually:</p>
<pre class="literal-block">
sudo apt-get install libjpeg-dev libsqlite3-dev libexif-dev libid3tag0-dev libvorbis-dev libflac-dev -y
</pre>
<p>Download miniDLNA 1.1.4 source or whatever the latest version is:</p>
<pre class="literal-block">
wget http://sourceforge.net/projects/minidlna/files/minidlna/1.1.4/minidlna-1.1.4.tar.gz
</pre>
<p>SourceForge has some stability issues so here is a Dropbox mirror in case it is down:</p>
<pre class="literal-block">
wget https://www.dropbox.com/s/hhv7ee057plec7a/minidlna-1.1.4.tar.gz
</pre>
<p>Unpack miniDLNA:</p>
<pre class="literal-block">
tar -xvf minidlna-1.1.4.tar.gz
</pre>
<p>Enter the miniDLNA directory:</p>
<pre class="literal-block">
cd minidlna-1.1.4
</pre>
<p>Configure, make and install miniDLNA, it will take 5 minutes:</p>
<pre class="literal-block">
./configure &amp;&amp; make &amp;&amp; sudo make install
</pre>
<p>Copy the default configuration file:</p>
<pre class="literal-block">
sudo cp minidlna.conf /etc/
</pre>
<p>Copy the startup daemon script to autostart ReadyMedia miniDLNA on boot:</p>
<pre class="literal-block">
sudo cp linux/minidlna.init.d.script /etc/init.d/minidlna
</pre>
<p>Make the startup script executable:</p>
<pre class="literal-block">
sudo chmod +x /etc/init.d/minidlna
</pre>
<p>Update rc to use the miniDLNA defaults:</p>
<pre class="literal-block">
sudo update-rc.d minidlna defaults
</pre>
<p>Edit the configuration:</p>
<pre class="literal-block">
sudo nano /etc/minidlna.conf
</pre>
<p>Edit the following to point to your media</p>
<p>This version of minidlna will give you multiple folders under Video. Before movies and TV
would have been under separate categories, now movies and TV will both be under the
category video. It will also show the folder structure of them instead of showing just
the video files. Avi files will also show up and be streamable.</p>
<p>inotify uses resources because it autoupdates your library, if you don’t use inotify you
will have to manually restart and reload the miniDLNA service</p>
<p>The friendly name is how your miniDLNA server will show up to its streaming clients:</p>
<pre class="literal-block">
media_dir=V,/mnt/usbstorage/Movies
media_dir=V,/mnt/usbstorage/TV
media_dir=A,/mnt/usbstorage/Music
media_dir=P,/mnt/usbstorage/Pictures
# Names the DLNA server
friendly_name=RasPi Media Server
# Tells the DLNA to update the library when there are changes
inotify=yes
</pre>
<p>Ctrl+X, Y and Enter to save and exit</p>
<p>Start the minidlna service:</p>
<pre class="literal-block">
sudo service minidlna restart
</pre>
<p>Now make sure miniDLNA starts on boot</p>
<p>It will run on port 8200 so you can check how many media files it has indexed there:</p>
<pre class="literal-block">
sudo reboot
</pre>
<p>Your Raspberry Pi DLNA server will now be accessible to stream media to your clients:
PCs, XBOX, PS3, Phones, TVs and more.</p>
</div>


<p align="center"><a href="#">on the top</a></p>
    </div>
</div>
<div id="footer-wrapper">
<ul class="footer">
</ul><ul class="footer">
    <li class="footer">&copy;&nbsp;2016&nbsp;Kevin J. Walchko&nbsp;::</li>
    <li class="footer"><a href="../../../..">Planet Express </a>&nbsp;::</li>
    <li class="footer"><a href="https://github.com/getpelican">pelican</a></li>
    <!-- <li class="footer"><a href="http://creativecommons.org/licenses/by-nc/3.0/deed">Content CC BY-NC</a>&nbsp;::</li> -->
    <!-- <li class="footer"><a href="http://fontawesome.io">Font Awesome <i class="fa fa-flag"></i></a></li> -->
    <!-- <li class="footer"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></li> -->
</ul>
<span><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></span>
</div></body>
</html>