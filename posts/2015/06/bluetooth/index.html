<!-- This is for the actual single article -->


<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bluetooth | Planet Express</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<meta name="description" content="Working with bluetooth on linux."><meta name="author" content="walchko">  <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
  <meta http-equiv="Cache-Control" content="max-age=604800, must-revalidate" />
  <link href="../../../../theme/css/screen.css" rel="stylesheet" type="text/css" />
  <link href="../../../../theme/css/pygments.css" rel="stylesheet" type="text/css" />
  <link rel="icon" href="../../../../favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="../../../../favicon.ico" type="image/x-icon">
</head>
<body>
<div id="outer-wrapper">
<div id="header-wrapper">
  <div class="logo"><a href="../../../..">Planet Express</a></div>
  <div class="small">Our crew is replaceable. Your package isn't.</div>
  <div class="nav">
  <li><a href="../../../../about.html">About Me</a></li>
  <li><a href="../../../../colophon.html">Colophon</a></li>
  <li><a href="../../../../categories.html">Topics</a></li>
  <li><a href="../../../../archives.html">Blog</a></li>
  </div>
  <div class="nav social">
<ul>
    <li><a href="http://github.com/walchko"><i class="fa fa-github-alt fa-2x"></i></a></li>
    <li><a href="http://stackoverflow.com/users/5374768/kevin"><i class="fa fa-stack-overflow fa-2x"></i></a></li>
    <li><a href="http://raspberrypi.stackexchange.com/users/1677/kevin"><i class="fa fa-stack-exchange fa-2x"></i></a></li>
</ul>  </div>
</div>    <div id="main">

<!--  -->

<h2><a href="../../../../posts/2015/06/bluetooth">Bluetooth</a></h2>
<h5><i class="icon-feather"></i> Tue 30 June 2015
<i class="icon-bookmarks"></i>
</h5>

<img alt="" class="align-center" src="../../../../blog/raspbian/pics/bluetooth.png" style="width: 100px;" />
<p><strong>Note:</strong> Things changed with Raspbian Jessie, some of this might be out of
date.</p>
<p><strong>Note:</strong> Also, RPi 3 comes with an integrated bluetooth module</p>
<div class="section" id="rpi-3">
<h2>RPI 3</h2>
<p>Services:</p>
<pre class="literal-block">
pi&#64;zoidberg ~ $ service bluetooth status
● bluetooth.service - Bluetooth service
   Loaded: loaded (/lib/systemd/system/bluetooth.service; enabled)
   Active: active (running) since Fri 2016-12-30 20:35:36 MST; 1 weeks 0 days ago
     Docs: man:bluetoothd(8)
 Main PID: 586 (bluetoothd)
   Status: &quot;Running&quot;
   CGroup: /system.slice/bluetooth.service
           └─586 /usr/lib/bluetooth/bluetoothd
</pre>
<p>Packages installed:</p>
<pre class="literal-block">
pi&#64;zoidberg ~ $ dpkg-query -l '*blue*'
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)
||/ Name           Version      Architecture Description
+++-==============-============-============-=================================
ii  bluez          5.23-2+rpi2  armhf        Bluetooth tools and daemons
un  bluez-alsa     &lt;none&gt;       &lt;none&gt;       (no description available)
un  bluez-audio    &lt;none&gt;       &lt;none&gt;       (no description available)
ii  bluez-firmware 1.2-3+rpi1   all          Firmware for Bluetooth devices
un  bluez-input    &lt;none&gt;       &lt;none&gt;       (no description available)
un  bluez-network  &lt;none&gt;       &lt;none&gt;       (no description available)
un  bluez-serial   &lt;none&gt;       &lt;none&gt;       (no description available)
un  bluez-utils    &lt;none&gt;       &lt;none&gt;       (no description available)
ii  pi-bluetooth   0.1.1        armhf        Raspberry Pi 3 bluetooth
</pre>
</div>
<div class="section" id="dongle-rpi-2">
<h2>Dongle (RPi 2)</h2>
<p>Make sure your bluetooth dongle is working:</p>
<pre class="literal-block">
pi&#64;calculon ~ $ lsusb
Bus 001 Device 002: ID 0424:9512 Standard Microsystems Corp.
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 003: ID 0424:ec00 Standard Microsystems Corp.
Bus 001 Device 004: ID 0a12:0001 Cambridge Silicon Radio, Ltd Bluetooth Dongle (HCI mode)
Bus 001 Device 005: ID 0bc2:3312 Seagate RSS LLC
</pre>
<p>Device 004 is my bluetooth dongle.</p>
</div>
<div class="section" id="audio">
<h2>Audio</h2>
<p>References
<a class="reference external" href="http://blog.whatgeek.com.pt/2014/04/20/raspberry-pi-bluetooth-wireless-speaker/">1</a>
<a class="reference external" href="http://www.correderajorge.es/bluetooth-on-raspberry-audio-streaming/">2</a></p>
<p>Get the bluetooth software:</p>
<pre class="literal-block">
sudo apt-get install bluetooth bluez-utils bluez-alsa
</pre>
<p>Add <tt class="docutils literal">pi</tt> to the user group:</p>
<pre class="literal-block">
sudo gpasswd -a pi bluetooth
</pre>
<p>Start up bluetooth dongle:</p>
<pre class="literal-block">
sudo hciconfig hci0 up
</pre>
<p>Scan for bluetooth devices</p>
<pre class="literal-block">
pi&#64;calculon ~ $ hcitool scan
Scanning ...
    44:2A:60:D6:49:34   Dalek
</pre>
<p>If you need to figure out what your bluetooth hardware address is for <tt class="docutils literal">hci0</tt>:</p>
<pre class="literal-block">
hcitool dev
</pre>
<p>Pair with device using <tt class="docutils literal"><span class="pre">bluetooth-agent</span> <span class="pre">--adapter</span> hci0 &lt;pin&gt; &lt;hardware_id&gt;</tt>:</p>
<pre class="literal-block">
bluetooth-agent --adapter hci0 0000 00:11:67:8C:17:80
</pre>
<p>See if device is trusted or not:</p>
<pre class="literal-block">
bluez-test-device trusted &lt;hardware_id&gt;
</pre>
<p>If it returns a <tt class="docutils literal">0</tt> then it is not trusted and a <tt class="docutils literal">1</tt> if it is
trusted. To make it trusted:</p>
<pre class="literal-block">
bluez-test-device trusted &lt;hardware_id&gt; yes
</pre>
<p>Edit/create <tt class="docutils literal"><span class="pre">~/.asoundrc</span></tt> with:</p>
<pre class="literal-block">
pcm.bluetooth {
                type bluetooth
                device &lt;hardware_id&gt;
}
</pre>
<p><strong>Note:</strong> You may have to copy this file and rename it to: <tt class="docutils literal">/etc/asound.conf</tt></p>
<p>Edit <tt class="docutils literal">/etc/bluetooth/audio.conf</tt> and add the following to the
<tt class="docutils literal">[General]</tt> section:</p>
<pre class="literal-block">
Disable=Media
Enable=Socket,Sink,Source
</pre>
<p>Restart bluetooth service with:</p>
<pre class="literal-block">
sudo /etc/init.d/bluetooth restart
</pre>
</div>
<div class="section" id="audio-programs">
<h2>Audio Programs</h2>
<pre class="literal-block">
mplayer -ao alsa:device=bluetooth sound.mp3
mpg321 -a bluetooth -g 15 sound.mp3
</pre>
</div>


<p align="center"><a href="#">on the top</a></p>
    </div>
</div>
<div id="footer-wrapper">
<ul class="footer">
</ul><ul class="footer">
    <li class="footer">&copy;&nbsp;2016&nbsp;Kevin J. Walchko&nbsp;::</li>
    <li class="footer"><a href="../../../..">Planet Express </a>&nbsp;::</li>
    <li class="footer"><a href="https://github.com/getpelican">pelican</a></li>
    <!-- <li class="footer"><a href="http://creativecommons.org/licenses/by-nc/3.0/deed">Content CC BY-NC</a>&nbsp;::</li> -->
    <!-- <li class="footer"><a href="http://fontawesome.io">Font Awesome <i class="fa fa-flag"></i></a></li> -->
    <!-- <li class="footer"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></li> -->
</ul>
<span><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></span>
</div></body>
</html>